<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>GullyScore ‚Äì Live Village Cricket Scores</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- SPA Redirect Fix for GitHub Pages -->
  <script>
    (function () {
      var redirect = sessionStorage.redirect;
      delete sessionStorage.redirect;
      if (redirect && redirect !== location.pathname) {
        history.replaceState(null, null, redirect);
      }
    })();
  </script>

  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: radial-gradient(circle at top left, #063a4e, #020815 55%, #010308);
      color: #f5f5f5;
    }
    a { text-decoration: none; color: inherit; }

    /* NAVBAR */
    .nav {
      position: sticky;
      top: 0;
      z-index: 100;
      backdrop-filter: blur(10px);
      background: rgba(3, 10, 22, 0.9);
      border-bottom: 1px solid #133b56;
    }
    .nav-inner {
      max-width: 960px;
      margin: 0 auto;
      padding: 10px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .brand { display: flex; gap: 10px; align-items: center; }
    .brand-logo {
      width: 34px; height: 34px; border-radius: 50%;
      background: linear-gradient(135deg, #00b4d8, #90e0ef);
      display: flex; align-items: center; justify-content: center;
      font-weight: 700; color: #02121d;
    }
    .brand-text-title { font-weight: 600; font-size: 17px; }
    .brand-text-sub { font-size: 12px; color: #a9ffcb; }

    .nav-links { display: flex; gap: 14px; font-size: 14px; }
    .nav-link { opacity: 0.7; }
    .nav-link.active {
      opacity: 1;
      font-weight: 600;
      border-bottom: 2px solid #00b4d8;
    }

    /* LAYOUT */
    .page {
      max-width: 960px;
      margin: 0 auto;
      padding: 14px 16px 32px;
    }
    .top-row {
      display: grid;
      grid-template-columns: minmax(0,2fr) minmax(0,1.3fr);
      gap: 14px;
    }
    @media (max-width: 780px) {
      .top-row { grid-template-columns: 1fr; }
    }

    .card {
      background: rgba(2, 17, 30, 0.92);
      border-radius: 14px;
      border: 1px solid #16364b;
      padding: 14px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.5);
    }
    .card-title { font-size: 15px; font-weight: 600; }
    .card-sub { font-size: 12px; color: #a3b7cf; }

    #live-scores { margin-top: 10px; font-size: 13px; min-height: 24px; }
    .empty-text { color: #9fb3cc; }

    .match-card {
      display: grid;
      grid-template-columns: 1.6fr 1fr;
      gap: 6px;
      padding: 10px;
      margin: 6px 0;
      border-radius: 10px;
      background: radial-gradient(circle at top left, #042638, #020b18);
      border: 1px solid rgba(0,180,216,.5);
    }
    .match-main h3 {
      margin: 0 0 4px;
      font-size: 14px;
    }
    .match-meta { font-size: 11px; color: #a3b7cf; }
    .match-status { font-size: 11px; font-weight: 600; color: #ffee93; }

    .match-score {
      text-align: right;
      font-size: 14px;
      font-weight: 600;
    }
    .match-score small {
      display: block;
      font-size: 11px;
      color: #a3b7cf;
    }

    .footer {
      max-width: 960px;
      margin: 0 auto 18px;
      padding: 0 16px;
      font-size: 11px;
      color: #7c8aa3;
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
    }
  </style>
</head>

<body>

<header class="nav">
  <div class="nav-inner">
    <div class="brand">
      <div class="brand-logo">GS</div>
      <div>
        <div class="brand-text-title">GullyScore</div>
        <div class="brand-text-sub">Live Village Cricket Scores</div>
      </div>
    </div>
    <nav class="nav-links">
      <a class="nav-link active" href="/">Live</a>
      <a class="nav-link" href="league.html">League</a>
      <a class="nav-link" href="profiles.html">Profiles</a>
    </nav>
  </div>
</header>

<main class="page">
  <div class="top-row">
    <section class="card">
      <div class="card-title">Live International Cricket</div>
      <div class="card-sub">Auto-refresh every 15 seconds</div>
      <div id="live-scores">Loading live scores‚Ä¶</div>
    </section>

    <aside class="card">
      <div class="card-title">Score your gully matches</div>
      <div class="card-sub">
        Ball-by-ball scoring for village & street tournaments.
      </div>
      <br />
      <button onclick="location.href='attack.html'">üèè Start a local match</button>
    </aside>
  </div>
</main>

<footer class="footer">
  <div>¬© <span id="year"></span> GullyScore</div>
  <div>Powered by public cricket APIs</div>
</footer>

<script>
  document.getElementById("year").textContent = new Date().getFullYear();

  // üî¥ PUT YOUR REAL API KEY HERE
  const API_KEY = "043a7e78-44d0-4eac-a4fa-532da953fe35";

  async function loadLiveScores() {
    const box = document.getElementById("live-scores");
    box.innerHTML = "Loading live scores‚Ä¶";

    try {
      const res = await fetch(
        https://cricketdata.org/api/match/live?apikey=${API_KEY}
      );
      const json = await res.json();

      if (!json?.data?.length) {
        box.innerHTML =
          '<div class="empty-text">No live matches right now.</div>';
        return;
      }

      box.innerHTML = "";

      json.data.forEach(m => {
        const div = document.createElement("div");
        div.className = "match-card";
        div.innerHTML = `
          <div class="match-main">
            <h3>${m.teams || "Teams TBA"}</h3>
            <div class="match-meta">${m.match_type || ""} ‚Ä¢ ${m.venue || ""}</div>
            <div class="match-status">${m.status || "LIVE"}</div>
          </div>
          <div class="match-score">
            ${m.score || "Score TBA"}
            <small>Updated now</small>
          </div>
        `;
        box.appendChild(div);
      });
    } catch (e) {
      box.innerHTML =
        '<div class="empty-text">Error loading scores.</div>';
    }
  }

  loadLiveScores();
  setInterval(loadLiveScores, 15000);
</script>

</body>
</html>
